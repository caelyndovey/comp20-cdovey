<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Lift Knockoff</title>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="style.css" type="text/css" />

        <script>
        var myLat = 0;
        var myLng = 0;

        // called on page load
        function init(){
            getLocation();
        }

        // get user current location and update LAT and LNG values
        function getLocation() {
            console.log("Inside getLocation...");
            navigator.geolocation.getCurrentPosition(function(position) {
                console.log("Inside callback for getCurrentPosition...");

                myLat = position.coords.latitude;
                myLng = position.coords.longitude;
                getRides();
            });
            console.log("Leaving getLocation...");

        }

        // retrieve available drivers/passengers
        function getRides() {
            var request = new XMLHttpRequest();
            var url = 'https://hans-moleman.herokuapp.com/rides';
            var params = 'username=FQ4DubnJ&lat='+myLat+'&lng='+myLng;
            request.open('POST', url, true);
            request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            request.onreadystatechange = function() {
                if (request.readyState == 4 && request.status == 200) {
                    rideRequests = JSON.parse(request.responseText);
                    console.log(rideRequests);
                    for (count = 0; count < 0;  count++) {
                        console.log(rideRequests[count].username);
                    }
                }
            }
            request.send(params); 
        }
       
        
        </script>

    </head>
    
    <body onload="init()">

    </body>

</html> 